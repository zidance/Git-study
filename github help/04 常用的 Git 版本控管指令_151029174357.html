<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>04 常用的 Git 版本控管指令.markdown—/Users/Zidane/Documents/Learn-Git-in-30-days/docs</title>
    <style type="text/css">
    html{font-family: sans-serif;-ms-text-size-adjust: 100%;-webkit-text-size-adjust: 100%}body{margin: 0}article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display: block}audio,canvas,progress,video{display: inline-block;vertical-align: baseline}audio:not([controls]){display: none;height: 0}[hidden],template{display: none}a{background: transparent}a:active,a:hover{outline: 0}abbr[title]{border-bottom: 1px dotted}b,strong{font-weight: bold}dfn{font-style: italic}h1{font-size: 2em;margin: 0.67em 0}mark{background: #ff0;color: #000}small{font-size: 80%}sub,sup{font-size: 75%;line-height: 0;position: relative;vertical-align: baseline}sup{top: -0.5em}sub{bottom: -0.25em}img{border: 0}svg:not(:root){overflow: hidden}figure{margin: 1em 40px}hr{box-sizing: content-box;height: 0}pre{overflow: auto}code,kbd,pre,samp{font-family: monospace, monospace;font-size: 1em}button,input,optgroup,select,textarea{color: inherit;font: inherit;margin: 0}button{overflow: visible}button,select{text-transform: none}button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance: button;cursor: pointer}button[disabled],html input[disabled]{cursor: default}button::-moz-focus-inner,input::-moz-focus-inner{border: 0;padding: 0}input{line-height: normal}input[type="checkbox"],input[type="radio"]{box-sizing: border-box;padding: 0}input[type="number"]::-webkit-inner-spin-button,input[type="number"]::-webkit-outer-spin-button{height: auto}input[type="search"]{-webkit-appearance: textfield;box-sizing: content-box}input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance: none}fieldset{border: 1px solid #c0c0c0;margin: 0 2px;padding: 0.35em 0.625em 0.75em}legend{border: 0;padding: 0}textarea{overflow: auto}optgroup{font-weight: bold}table{border-collapse: collapse;border-spacing: 0}td,th{padding: 0}*{box-sizing: border-box}input,select,textarea,button{font: 13px/1.4 Helvetica, arial, freesans, clean, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"}body{min-width: 1020px;font: 13px/1.4 Helvetica, arial, freesans, clean, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol";color: #333;background-color: #fff}a{color: #4183c4;text-decoration: none}a:hover,a:active{text-decoration: underline}hr,.rule{height: 0;margin: 15px 0;overflow: hidden;background: transparent;border: 0;border-bottom: 1px solid #ddd}hr:before,.rule:before{display: table;content: ""}hr:after,.rule:after{display: table;clear: both;content: ""}h1,h2,h3,h4,h5,h6{margin-top: 15px;margin-bottom: 15px;line-height: 1.1}h1{font-size: 30px}h2{font-size: 21px}h3{font-size: 16px}h4{font-size: 14px}h5{font-size: 12px}h6{font-size: 11px}small{font-size: 90%}blockquote{margin: 0}.lead{margin-bottom: 30px;font-size: 20px;font-weight: 300;color: #555}.text-muted{color: #999}.text-danger{color: #bd2c00}.text-emphasized{font-weight: bold;color: #333}ul,ol{padding: 0;margin-top: 0;margin-bottom: 0}ol ol,ul ol{list-style-type: lower-roman}ul ul ol,ul ol ol,ol ul ol,ol ol ol{list-style-type: lower-alpha}dd{margin-left: 0}tt,code{font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;font-size: 12px}pre{margin-top: 0;margin-bottom: 0;font: 12px Consolas, "Liberation Mono", Menlo, Courier, monospace}#realtime .status{overflow: visible;position: absolute;top: -5px;left: 0;background: url("/public/images/github-status.png");width: 26px;height: 26px;display: block;margin: 0 5px 0 0}#realtime .up{background-position: 0 0}#realtime .problem{background-position: 0 -53px}#realtime .down{background-position: 0 -26px}.container{max-width: 920px;margin: 0 auto 20px auto}#header{background: #FAFAFA;background: -moz-linear-gradient(#FAFAFA, #EAEAEA);background: -webkit-linear-gradient(#FAFAFA, #EAEAEA);-ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr='#fafafa', endColorstr='#eaeaea')";border-bottom: 1px solid #CACACA;box-shadow: 0 1px 0 rgba(255, 255, 255, 0.4),0 0 10px rgba(0, 0, 0, 0.1)}#markup{padding: 3px}#markup article{padding-top: 30px}.markdown-body{overflow: hidden;font-family: "Helvetica Neue", Helvetica, "Segoe UI", Arial, freesans, sans-serif;font-size: 16px;line-height: 1.6;word-wrap: break-word}.markdown-body>*:first-child{margin-top: 0 !important}.markdown-body>*:last-child{margin-bottom: 0 !important}.markdown-body .absent{color: #c00}.markdown-body .anchor{position: absolute;top: 0;left: 0;display: block;padding-right: 6px;padding-left: 30px;margin-left: -30px}.markdown-body .anchor:focus{outline: none}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{position: relative;margin-top: 1em;margin-bottom: 16px;font-weight: bold;line-height: 1.4}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{display: none;color: #000;vertical-align: middle}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{padding-left: 8px;margin-left: -30px;text-decoration: none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{display: inline-block}.markdown-body h1 tt,.markdown-body h1 code,.markdown-body h2 tt,.markdown-body h2 code,.markdown-body h3 tt,.markdown-body h3 code,.markdown-body h4 tt,.markdown-body h4 code,.markdown-body h5 tt,.markdown-body h5 code,.markdown-body h6 tt,.markdown-body h6 code{font-size: inherit}.markdown-body h1{padding-bottom: 0.3em;font-size: 2.25em;line-height: 1.2;border-bottom: 1px solid #eee}.markdown-body h1 .anchor{line-height: 1}.markdown-body h2{padding-bottom: 0.3em;font-size: 1.75em;line-height: 1.225;border-bottom: 1px solid #eee}.markdown-body h2 .anchor{line-height: 1}.markdown-body h3{font-size: 1.5em;line-height: 1.43}.markdown-body h3 .anchor{line-height: 1.2}.markdown-body h4{font-size: 1.25em}.markdown-body h4 .anchor{line-height: 1.2}.markdown-body h5{font-size: 1em}.markdown-body h5 .anchor{line-height: 1.1}.markdown-body h6{font-size: 1em;color: #777}.markdown-body h6 .anchor{line-height: 1.1}.markdown-body p,.markdown-body blockquote,.markdown-body ul,.markdown-body ol,.markdown-body dl,.markdown-body table,.markdown-body pre{margin-top: 0;margin-bottom: 16px}.markdown-body hr{height: 4px;padding: 0;margin: 16px 0;background-color: #e7e7e7;border: 0 none}.markdown-body ul,.markdown-body ol{padding-left: 2em}.markdown-body ul.no-list,.markdown-body ol.no-list{padding: 0;list-style-type: none}.markdown-body ul ul,.markdown-body ul ol,.markdown-body ol ol,.markdown-body ol ul{margin-top: 0;margin-bottom: 0}.markdown-body li>p{margin-top: 16px}.markdown-body dl{padding: 0}.markdown-body dl dt{padding: 0;margin-top: 16px;font-size: 1em;font-style: italic;font-weight: bold}.markdown-body dl dd{padding: 0 16px;margin-bottom: 16px}.markdown-body blockquote{padding: 0 15px;color: #777;border-left: 4px solid #ddd}.markdown-body blockquote>:first-child{margin-top: 0}.markdown-body blockquote>:last-child{margin-bottom: 0}.markdown-body table{display: block;width: 100%;overflow: auto;word-break: normal;word-break: keep-all}.markdown-body table th{font-weight: bold}.markdown-body table th,.markdown-body table td{padding: 6px 13px;border: 1px solid #ddd}.markdown-body table tr{background-color: #fff;border-top: 1px solid #ccc}.markdown-body table tr:nth-child(2n){background-color: #f8f8f8}.markdown-body img{max-width: 100%;box-sizing: border-box}.markdown-body span.frame{display: block;overflow: hidden}.markdown-body span.frame>span{display: block;float: left;width: auto;padding: 7px;margin: 13px 0 0;overflow: hidden;border: 1px solid #ddd}.markdown-body span.frame span img{display: block;float: left}.markdown-body span.frame span span{display: block;padding: 5px 0 0;clear: both;color: #333}.markdown-body span.align-center{display: block;overflow: hidden;clear: both}.markdown-body span.align-center>span{display: block;margin: 13px auto 0;overflow: hidden;text-align: center}.markdown-body span.align-center span img{margin: 0 auto;text-align: center}.markdown-body span.align-right{display: block;overflow: hidden;clear: both}.markdown-body span.align-right>span{display: block;margin: 13px 0 0;overflow: hidden;text-align: right}.markdown-body span.align-right span img{margin: 0;text-align: right}.markdown-body span.float-left{display: block;float: left;margin-right: 13px;overflow: hidden}.markdown-body span.float-left span{margin: 13px 0 0}.markdown-body span.float-right{display: block;float: right;margin-left: 13px;overflow: hidden}.markdown-body span.float-right>span{display: block;margin: 13px auto 0;overflow: hidden;text-align: right}.markdown-body code,.markdown-body tt{padding: 0;padding-top: 0.2em;padding-bottom: 0.2em;margin: 0;font-size: 85%;background-color: rgba(0,0,0,0.04);border-radius: 3px}.markdown-body code:before,.markdown-body code:after,.markdown-body tt:before,.markdown-body tt:after{letter-spacing: -0.2em;content: "\00a0"}.markdown-body code br,.markdown-body tt br{display: none}.markdown-body del code{text-decoration: inherit}.markdown-body pre>code{padding: 0;margin: 0;font-size: 100%;word-break: normal;white-space: pre;background: transparent;border: 0}.markdown-body .highlight{margin-bottom: 16px}.markdown-body .highlight pre,.markdown-body pre{padding: 16px;overflow: auto;font-size: 85%;line-height: 1.45;background-color: #f7f7f7;border-radius: 3px}.markdown-body .highlight pre{margin-bottom: 0;word-break: normal}.markdown-body pre{word-wrap: normal}.markdown-body pre code,.markdown-body pre tt{display: inline;max-width: initial;padding: 0;margin: 0;overflow: initial;line-height: inherit;word-wrap: normal;background-color: transparent;border: 0}.markdown-body pre code:before,.markdown-body pre code:after,.markdown-body pre tt:before,.markdown-body pre tt:after{content: normal}.markdown-body kbd{display: inline-block;padding: 3px 5px;font-size: 11px;line-height: 10px;color: #555;vertical-align: middle;background-color: #fcfcfc;border: solid 1px #ccc;border-bottom-color: #bbb;border-radius: 3px;box-shadow: inset 0 -1px 0 #bbb}.codehilite{background: #ffffff}.codehilite .c{color: #999988;font-style: italic}.codehilite .err{color: #a61717;background-color: #e3d2d2}.codehilite .k{color: #000000;font-weight: bold}.codehilite .o{color: #000000;font-weight: bold}.codehilite .cm{color: #999988;font-style: italic}.codehilite .cp{color: #999999;font-weight: bold}.codehilite .c1{color: #999988;font-style: italic}.codehilite .cs{color: #999999;font-weight: bold;font-style: italic}.codehilite .gd{color: #000000;background-color: #ffdddd}.codehilite .gd .x{color: #000000;background-color: #ffaaaa}.codehilite .ge{color: #000000;font-style: italic}.codehilite .gr{color: #aa0000}.codehilite .gh{color: #999999}.codehilite .gi{color: #000000;background-color: #ddffdd}.codehilite .gi .x{color: #000000;background-color: #aaffaa}.codehilite .go{color: #888888}.codehilite .gp{color: #555555}.codehilite .gs{font-weight: bold}.codehilite .gu{color: #aaaaaa}.codehilite .gt{color: #aa0000}.codehilite .kc{color: #000000;font-weight: bold}.codehilite .kd{color: #000000;font-weight: bold}.codehilite .kp{color: #000000;font-weight: bold}.codehilite .kr{color: #000000;font-weight: bold}.codehilite .kt{color: #445588;font-weight: bold}.codehilite .m{color: #009999}.codehilite .s{color: #d14}.codehilite .na{color: #008080}.codehilite .nb{color: #0086B3}.codehilite .nc{color: #445588;font-weight: bold}.codehilite .no{color: #008080}.codehilite .ni{color: #800080}.codehilite .ne{color: #990000;font-weight: bold}.codehilite .nf{color: #990000;font-weight: bold}.codehilite .nn{color: #555555}.codehilite .nt{color: #000080}.codehilite .nv{color: #008080}.codehilite .ow{color: #000000;font-weight: bold}.codehilite .w{color: #bbbbbb}.codehilite .mf{color: #009999}.codehilite .mh{color: #009999}.codehilite .mi{color: #009999}.codehilite .mo{color: #009999}.codehilite .sb{color: #d14}.codehilite .sc{color: #d14}.codehilite .sd{color: #d14}.codehilite .s2{color: #d14}.codehilite .se{color: #d14}.codehilite .sh{color: #d14}.codehilite .si{color: #d14}.codehilite .sx{color: #d14}.codehilite .sr{color: #009926}.codehilite .s1{color: #d14}.codehilite .ss{color: #990073}.codehilite .bp{color: #999999}.codehilite .vc{color: #008080}.codehilite .vg{color: #008080}.codehilite .vi{color: #008080}.codehilite .il{color: #009999}
    </style>
    <style type="text/css">
      .markdown-body hr{background:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC")}
    </style>
  </head>
  <body>
    <div class="container">
      <div id="markup">
        <article id="content" class="markdown-body">
          <h1 id="04-git">第 04 天：常用的 Git 版本控管指令</h1>
<p>本篇文章將帶大家學會幾個最重要也最基本的版控工作，其中將包含基本的檔案操作如新增、刪除、重新命名檔案，提交變更 (建立新版本)、查詢歷史紀錄等工作。</p>
<h2 id="_1">準備工作目錄</h2>
<p>複習一下上一篇「第 03 天：建立儲存庫」的內容，我們直接來建立一個本地儲存庫，即可開始本篇文章的所有練習。</p>
<div class="codehilite"><pre>mkdir git-demo
cd git-demo
git init
</pre></div>


<h2 id="_2">新增檔案</h2>
<p>我們在工作目錄下放一些檔案，至於放什麼檔案都可以，總之先複製一些現有的檔案與目錄進到目前的工作目錄下。</p>
<p>本篇文章，我將以 <a href="http://yeoman.io/">YEOMAN</a> 工具，快速產生一個 webapp 範例網站，只要一個指令就可以建立一個完整網站：</p>
<div class="codehilite"><pre>yo webapp
</pre></div>


<p><strong>註</strong>: 關於 <a href="http://yeoman.io/">YEOMAN</a> 在 Windows 平台的使用，可以參考筆者的文章 <a href="http://blog.miniasp.com/post/2013/08/11/Yeoman-1-0-Installation-and-Usage-on-Windows.aspx">如何在 Windows 平台安裝與使用 Yeoman 1.0 相關工具</a>，該文詳述完整的安裝與使用過程。</p>
<p>新增了檔案之後，如果你還在 Git Shell 介面下，應該會立刻看到如下圖的提示：</p>
<p><img alt="image" src="https://f.cloud.github.com/assets/88981/1174070/809bfc4e-2142-11e3-9ba7-498ac2ea3b09.png"></p>
<p>也就是以下這段位於路徑後面的提示：</p>
<div class="codehilite"><pre>[master +10 ~0 -0 !]
</pre></div>


<p>在這段提示的地方，你可以看到幾個東西：</p>
<ul>
<li>master 代表目前工作目錄是 <strong>master</strong> 分支，也是 Git 的預設分支名稱。</li>
<li>「紅色」的數字都代表 Untracked (未追蹤) 的檔案，也就是這些變更都不會進入版本控管。</li>
<li>+10 代表有 10 個「新增」的檔案</li>
<li>~0  代表有 0 個「修改」的檔案</li>
<li>-0  代表有 0 個「刪除」的檔案</li>
</ul>
<p>如果要要將這些新增的檔案加入到 Git 版本控管，你必須下達以下指令：</p>
<div class="codehilite"><pre>git add .
</pre></div>


<p>如此一來，這個工作目錄下所有的檔案、目錄與子目錄下的所有檔案，全部都會被加入到這個 Git 工作目錄的【索引】或【快取】之中。請注意: 此時並沒有建立任何版本，只是告知 Git 這些檔案「即將」被加入 Git 版本庫而已。</p>
<p>如下圖示，是我這邊執行完 <code>git add .</code> 之後的結果，這裡所發生的 warning 訊息不是很嚴重，有興趣了解的人可以參考筆者的另一篇文章: <a href="http://blog.miniasp.com/post/2013/09/15/Git-for-Windows-Line-Ending-Conversion-Notes.aspx">Git 在 Windows 平台處理斷行字元 (CRLF) 的注意事項</a>。</p>
<p><img alt="image" src="https://f.cloud.github.com/assets/88981/1174159/a93a1de2-2143-11e3-8be8-02defc6e7feb.png"></p>
<p>不過有趣的地方在於，原本「紅色的數字」現在卻變成了「綠色的數字」，這裡所代表的意義是：</p>
<ul>
<li>「綠色」的數字都代表 Staged (準備好) 的檔案，也就是這些變更才會進入版本控管。</li>
<li>+23 代表有 23 個「新增」的檔案將被建立一個版本</li>
<li>~0  代表有 0 個「修改」的檔案將被建立一個版本</li>
<li>-0  代表有 0 個「刪除」的檔案將被建立一個版本</li>
</ul>
<p>但原本不是只有 +10 (紅色) 而已嗎? 怎麼執行完後變成了 +23 (綠色) 呢？</p>
<p>我們執行 <code>git reset</code> 重設一下工作目錄的索引狀態，然後再執行一次 <code>git status</code> 查詢當前工作目錄的詳細狀態，如下圖示：</p>
<p><img alt="image" src="https://f.cloud.github.com/assets/88981/1174252/f7e382fc-2144-11e3-9021-b016de2f8dc3.png"></p>
<p>你可以發現，這邊列出的只有「第一層目錄下的檔案與目錄」而已，因為 git 不會這個時候去查到底目錄下到底有多少檔案沒有被追蹤。</p>
<p>當我們執行 <code>git add .</code> 之後，再執行一次 <code>git status</code> 查詢狀態，你可以發現連子目錄下的檔案也都全部被加入了，所以這個數字才會變多，如下圖示：</p>
<p><img alt="image" src="https://f.cloud.github.com/assets/88981/1174283/5e6c30aa-2145-11e3-89aa-a6c7363e5293.png"></p>
<h2 id="_3">新增部分檔案</h2>
<p>剛剛提到的 <code>git add .</code> 指令會自動將所有檔案(含子目錄的檔案)加入到工作目錄索引中，有時候我們只想讓特定目錄或特定檔案加入版本，這時你也可以指定特定目錄，或利用萬用字元來加入檔案。</p>
<p>我們再執行一次 <code>git reset</code> 重設工作目錄的索引狀態，然後用 <code>git add app</code> 加入 app 這個資料夾與其下的所有檔案，還有用 <code>git add .*</code> 新增所有「點」開頭的檔案，如下圖示：</p>
<p><img alt="image" src="https://f.cloud.github.com/assets/88981/1174397/0d767794-2147-11e3-9d2e-d063cf878a13.png"></p>
<p><img alt="image" src="https://f.cloud.github.com/assets/88981/1174412/2fdf7c0e-2147-11e3-82c9-cc541fe30aa8.png"></p>
<p>在執行的過程中，你應該可以發現，在執行 <code>git add</code> 的過程中，Git Shell 提示的文字也有了些變化，現在同時出現了「綠色的數字」與「紅色的數字」，所代表的意思跟上述是一樣的，是不是非常方便辨識！當你需要知道詳情才需要執行 <code>git status</code> 指令。</p>
<p><strong>註</strong>: 詳細的指令與參數說明，可以輸入 <code>git help add</code> 查詢完整的文件。</p>
<h2 id="_4">提交變更 / 建立版本</h2>
<p>這時我們預計要建立一個新版本了，在建立版本之前，我們還是把所有檔案給加入吧，請各位在執行一次 <code>git add .</code> 命令。</p>
<p>建立版本的指令如下：</p>
<div class="codehilite"><pre>git commit
git commit -m &quot;版本紀錄的說明文字&quot;
</pre></div>


<p>在 Git 版本控管中，所有的版本都必須擁有「版本紀錄的說明文字」 ( 簡稱 Log )，不像 Subversion 預設可以簽入「沒有版本紀錄說明」的版本。所以當你直接輸入 <code>git commit</code> 的話，預設會開啟 Notepad (記事本) 讓你輸入這個版本的訊息。開啟後的檔案會有很多 # 符號開頭的文字，這些都是註解，不會成為 Log 的一部分。</p>
<p>如下圖示，是我輸入的訊息文字：</p>
<p><img alt="image" src="https://f.cloud.github.com/assets/88981/1174514/baa9f4da-2148-11e3-97cc-c07aef98cf67.png"></p>
<p>當你按下 Ctrl+S 儲存這個文字檔，這時還不會建立一個新版本，還必須關閉這個 Notepad 視窗，這時才會正式建立版本，如下圖示：</p>
<p><img alt="image" src="https://f.cloud.github.com/assets/88981/1174571/a18b4778-2149-11e3-801f-5a3255999c37.png"></p>
<p>建立版本完後，Git Shell 的提示就只剩下 <code>[master]</code> 字樣了，代表目前已經沒有任何要被建立版本的索引或快取。</p>
<p><strong>註</strong>: 詳細的指令與參數說明，可以輸入 <code>git help commit</code> 查詢完整的文件。</p>
<h2 id="_5">查詢歷史紀錄</h2>
<p>由於我們剛剛建立了一個版本，當我們想要查詢版本的歷史紀錄，可以輸入以下指令：</p>
<div class="codehilite"><pre>git log
</pre></div>


<p><img alt="image" src="https://f.cloud.github.com/assets/88981/1174606/3b215e0e-214a-11e3-9b90-1bfe4275ca6d.png"></p>
<p>有時候紀錄越來越多，你也可以透過以下指令限制輸出的版本數量，你只要透過一個減號 ( - ) 與一個數字，就可以限定輸出最近幾筆紀錄：</p>
<div class="codehilite"><pre>git log -10
</pre></div>


<p><strong>註</strong>: 詳細的指令與參數說明，可以輸入 <code>git help log</code> 查詢完整的文件。</p>
<h2 id="_6">刪除檔案</h2>
<p>在 Git 指令列工具中也有個 <code>rm</code> 指令，可以用來刪除檔案。例如我們想刪除 <code>Gruntfile.js</code> 這個檔案，可以輸入以下指令：</p>
<div class="codehilite"><pre>git rm &#39;Gruntfile.js&#39;
</pre></div>


<p><img alt="image" src="https://f.cloud.github.com/assets/88981/1174637/fba7e7e2-214a-11e3-91a6-698ac73b111c.png"></p>
<p>這個 <code>git rm</code> 的指令執行的時候，會同時做兩件事：</p>
<ol>
<li>刪除工作目錄快取的 &lsquo;Gruntfile.js&rsquo; 這個檔案 (用來標示這個刪除檔案的動作要列入版本控管)</li>
<li>刪除工作目錄下的 &lsquo;Gruntfile.js&rsquo; 這個實體檔案 (代表真的把這個實體檔案給刪除)</li>
</ol>
<p><strong>註</strong>: 詳細的指令與參數說明，可以輸入 <code>git help rm</code> 查詢完整的文件。</p>
<h2 id="_7">檔案更名</h2>
<p>在 Git 指令列工具中也有個 <code>mv</code> 指令，可以用來變更檔案或目錄的名稱。例如我們想把 <code>test</code> 目錄更名為 <code>unit-test</code> 名稱，可以輸入以下指令：</p>
<div class="codehilite"><pre>git mv test unit-test
</pre></div>


<p><img alt="image" src="https://f.cloud.github.com/assets/88981/1174712/4279df1c-214c-11e3-892e-e25906440611.png"></p>
<p><strong>註</strong>: 詳細的指令與參數說明，可以輸入 <code>git help mv</code> 查詢完整的文件。</p>
<h2 id="_8">顯示工作目錄的索引狀態</h2>
<p>剛剛我們一直會看到 <code>git status</code> 來顯示工作目錄的狀態，你也可以使用 <code>git status -s</code> 來顯示較為精簡的版本。</p>
<p><img alt="image" src="https://f.cloud.github.com/assets/88981/1174822/62e8204a-214e-11e3-9d38-c950fd33e662.png"></p>
<p><strong>註</strong>: 詳細的指令與參數說明，可以輸入 <code>git help status</code> 查詢完整的文件。</p>
<h2 id="_9">重置目前的工作目錄</h2>
<p>我們曾經學過如何利用 <code>git reset</code> 重置目前工作目錄的索引狀態，但請注意，這個指令預設只會重置「索引狀態」，那些你用 <code>git rm</code> 刪除的目錄或檔案，還是用 <code>git mv</code> 更名的目錄或檔案，透過 <code>git reset</code> 都無法把「實體檔案」給救回來。</p>
<p>如果想把工作目錄也給還原到目前的最新版，則必須輸入以下指令：</p>
<div class="codehilite"><pre>git reset --hard
</pre></div>


<p><strong>註</strong>: 詳細的指令與參數說明，可以輸入 <code>git help reset</code> 查詢完整的文件。</p>
<h2 id="_10">還原其中一個被改壞的檔案</h2>
<p>如果檔案編輯到一半，發現被改壞了，你希望能救回改沒修改前的版本，這時你可以利用以下指令還原檔案：</p>
<div class="codehilite"><pre>git checkout master Gruntfile.js
</pre></div>


<p><img alt="image" src="https://f.cloud.github.com/assets/88981/1174862/496df756-214f-11e3-84ec-b015204c8b0d.png"></p>
<p>這段指令的意思是把 <code>master</code> 分支中最新版的 Grunefile.js 給還原，由於我先前已經把 Gruntfile.js 給刪除了，為了要救回這一個檔，可以用這個方式救回。這樣可以避免使用 <code>git reset --hard</code> 一次把所有檔案都給還原了！</p>
<p>請注意，還原的過程也會一併復原工作目錄的索引狀態喔！</p>
<p><strong>註</strong>: 詳細的指令與參數說明，可以輸入 <code>git help checkout</code> 查詢完整的文件。</p>
<h2 id="_11">今日小結</h2>
<p>今日的文章，可以說是在 Git 版本控管中不斷會重複使用的指令與參數，必須非常熟練才行，接下來的文章，將會詳細探討 Git 版本控管的內部結構，千萬不要錯過！</p>
<p>我重新整理一下本日學到的 Git 指令與參數：</p>
<ul>
<li>git init</li>
<li>git add .</li>
<li>git add app/*</li>
<li>git add *.txt</li>
<li>git status</li>
<li>git status -s</li>
<li>git commit</li>
<li>git commit -m &ldquo;版本紀錄的說明文字&rdquo;</li>
<li>git log</li>
<li>git log -10</li>
<li>git rm &lsquo;*.txt&rsquo;</li>
<li>git rm &lsquo;app/*.html&rsquo;</li>
<li>git mv &lsquo;oldname&rsquo; &lsquo;newname&rsquo;</li>
<li>git reset</li>
<li>git reset &ndash;hard</li>
<li>git checkout master &lsquo;filename&rsquo;</li>
</ul>
<h2 id="_12">參考連結</h2>
<ul>
<li><a href="http://gitref.org/basic/">BASIC SNAPSHOTTING</a></li>
</ul>
        </article>
      </div>
    </div>
  </body>
</html>
